## 3.6 拥塞控制原理

### 3.6.1 拥塞原因及代价

### 3.6.2 拥塞控制方法

- 端到端拥塞控制方法：当网络层没有为运输层的拥塞控制提供显示支持时，只能使用端到端的拥塞控制方法。通过超时或收到3次冗余ACK来推测当前网络已堵塞；通过收到新的ACK来推测当前网络畅通；TCP采用端到端的控制方法来实现拥塞控制，应为网络层一般不为拥塞控制提供显示支持；
- 网络辅助拥塞控制方法：网络层为运输层的拥塞控制提供显示支持。对于网络辅助的拥塞控制方式，拥塞信息从网络反馈到发送方通常有两种方式：直接网络反馈；经由接收方的网络反馈；



## 3.7 TCP拥塞控制

TCP的拥塞控制通过在发送方维护拥塞窗口(congestion window, cwnd)实现，在发送方中需确保未被确认的数据量不会超过cwnd和rwnd的最小值，即`LastByteSent - LastByteAcked <= min{cwnd, rwnd}`，端到端的拥塞控制是通过超时、收到3次冗余ACK或收到新的ACK来推测网络是否拥堵的，因此，cwnd的更新也取决于这三种情况

<img src="C:\Users\ndream\AppData\Roaming\Typora\typora-user-images\image-20231025152841478.png" alt="image-20231025152841478" style="zoom:67%;" />

> 例子：处于拥塞避免阶段时，如果MSS = 1460B、cwnd = 14600B，则在一个RTT内可发送10个报文段，对于每个到达的ACK、cwnd += 1/10MSS
>
> 如果是处于慢启动阶段，对于每个到达的ACK，cwnd += MSS，这是个报文段是同时发送的，所以在一个RTT，cwnd可以翻倍

